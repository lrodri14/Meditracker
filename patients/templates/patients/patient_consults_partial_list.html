<!-- Template used to display specific patient consults dynamically-->
{% load static %}

<!-- If paginator is available -->
{% load patients_custom_tags %}

{% if consults.has_other_pages %}
    <div id="consults-paginator" class="paginator">
        <span> {{ consults.number }} / {{ consults.paginator.num_pages }} </span>
        <div class="navigation">
            {% if filtered %}
                {% if consults.has_previous %}<i class="fas fa-angle-left" data-url="{% url 'patients:filter_patient_details' %}{% current_url 'page' consults.previous_page_number request.GET.urlencode %}"></i>{% endif %}{% if consults.has_next %}<i class="fas fa-angle-right" data-url="{% url 'patients:filter_patient_details' %}{% current_url 'page' consults.next_page_number request.GET.urlencode %}"></i>{% endif %}
            {% else %}
                {% if consults.has_previous %}<i class="fas fa-angle-left" data-url="{% url 'patients:patients_details' patient.pk %}{% current_url 'page' consults.previous_page_number %}"></i>{% endif %}{% if consults.has_next %}<i class="fas fa-angle-right" data-url="{% url 'patients:patients_details' patient.pk %}{% current_url 'page' consults.next_page_number %}"></i>{% endif %}
            {% endif %}
        </div>
    </div>
{% endif %}

<!--If consults are present this code will be rendered-->
{% if consults %}
    {% for c in consults %}
        <tr {% if c.medical_status %} onclick="window.location='{% url 'appointments:consult_details' c.pk %}'" {% endif %}>
            <td>{{ c.datetime|date }}</td>
            <td>{{ c.datetime|time }}</td>
            {% if c.medical_status %}
            <td class="attended">Attended</td>
            {% else %}
            <td class="not-attended">Not Attended</td>
            {% endif %}
            {% if c.status == 'OPEN' %}
                <td class="Open">Open</td>
            {% elif c.status == 'CONFIRMED' %}
                <td class="Confirmed">Confirmed</td>
            {% elif c.status == 'CANCELLED' %}
                <td class="Canceled">Cancelled</td>
            {% elif c.status == 'CLOSED' %}
                <td class="Closed">Closed</td>
            {% endif %}
            <td>{{ c.created_by }}</td>
        </tr>
    {% endfor %}
{% endif %}